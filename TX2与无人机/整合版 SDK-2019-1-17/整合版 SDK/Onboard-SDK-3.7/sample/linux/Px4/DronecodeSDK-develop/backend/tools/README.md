## Backend tools

This folder contains a few helper scripts meant to automatize some tasks such as packaging.

### package_backend_framework

This script makes a fat binary out of the `backend.framework` iOS framework, containing
architectures for iOS and those for the iOS simulator. It requires the builds for the
`ios` and `ios_simulator` targets to have completed successfully.

It can therefore be run from a macOS system with the following commands:


```
make BUILD_BACKEND=YES
make BUILD_BACKEND=YES ios
make BUILD_BACKEND=YES ios_simulator
bash package_backend_framework.bash
```

The resulting fat binary will be generated in `./build/fat_bin/`.

### push_backend_framework_to_s3

This script pushes the `dronecode-backend.zip` archive generated by _package_backend_framework.bash_
to amazon s3, under the name `dronecode-backend-latest.zip`.

It requires the `awscli` binary, that can be installed from homebrew:

```
brew install awscli
```

Documentation about the s3 commands can be found [here](https://docs.aws.amazon.com/cli/latest/reference/s3/).

Obviously, the script requires the backend fat binary to be built, meaning the following commands:

```
make BUILD_BACKEND=YES
make BUILD_BACKEND=YES ios
make BUILD_BACKEND=YES ios_simulator
bash package_backend_framework.bash
bash push_backend_framework_to_s3.bash
```
